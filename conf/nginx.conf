user			root;
worker_processes	1;

error_log	/var/log/nginx/error.log warn;
pid		/var/run/nginx.pid;

events {
	worker_connections  1024;
}

http {
	include		/etc/nginx/mime.types;
	default_type	application/octet-stream;

	log_format	main	'$remote_addr - $remote_user [$time_local] "$request" '
						'$status $body_bytes_sent "$http_referer" '
						'"$http_user_agent" "$http_x_forwarded_for"';

	access_log	/var/log/nginx/access.log  main;

	sendfile	on;
	keepalive_timeout	65;

	server {
		root /var/www/project/public;

		location / {
			try_files $uri /index.php$is_args$args;
		}

		location ~ ^/index\.php(/|$) {
			fastcgi_pass unix:/var/run/php/php7.3-fpm.sock;
			fastcgi_split_path_info ^(.+\.php)(/.*)$;
			include fastcgi_params;

			fastcgi_param SCRIPT_FILENAME $realpath_root$fastcgi_script_name;
			fastcgi_param DOCUMENT_ROOT $document_root;
			internal;
		}

		location ~ \.php$ {
			return 404;
		}
	}

	#include /etc/nginx/conf.d/*.conf;
}
